plugin.tx_pxadealers {
    mvc.callDefaultActionIfActionCantBeResolved = 1

    view {
        templateRootPaths {
            5 = {$plugin.tx_pxadealers.view.templateRootPath}
        }

        partialRootPaths {
            5 = {$plugin.tx_pxadealers.view.partialRootPath}
        }

        layoutRootPaths {
            5 = {$plugin.tx_pxadealers.view.layoutRootPath}
        }
    }

    persistence {
        storagePid = {$plugin.tx_pxadealers.persistence.storagePid}
    }

    settings {
        # Map settings
        map {
            stylesJSON =
            name = {$plugin.tx_pxadealers.settings.map.name}

            zoomOnShow = 14

            markerClusterer {
                imagePath = /typo3conf/ext/pxa_dealers/Resources/Public/Images/markerClusterer/m
            }

            markerTypes {
                default = /typo3conf/ext/pxa_dealers/Resources/Public/Icons/map_marker_icon_blue.png
            }

            googleJavascriptApiKey = {$plugin.tx_pxadealers.settings.googleJavascriptApiKey}
            googleServerApiKey = {$plugin.tx_pxadealers.settings.googleServerApiKey}

            scrollFix = {$plugin.tx_pxadealers.settings.map.scrollFix}
            scrollFixMobile = {$plugin.tx_pxadealers.settings.map.scrollFixMobile}
        }

        search {
            searchFields = name,zipcode,city,country.shortNameLocal,country.shortNameEn
            # Search in radius by kilometers
            radius = 100
        }

        dealersList {
            noImagePath = {$plugin.tx_pxadealers.settings.dealersList.noImagePath}
            showLogo = {$plugin.tx_pxadealers.settings.dealersList.showLogo}
            showDefaultImageIfNoLogo = {$plugin.tx_pxadealers.settings.dealersList.showDefaultImageIfNoLogo}
            imageWidth = {$plugin.tx_pxadealers.settings.dealersList.imageWidth}
            imageHeight = {$plugin.tx_pxadealers.settings.dealersList.imageHeight}
        }
    }
}

page {
    includeCSS {
        awesomplete = EXT:pxa_dealers/Resources/Public/Css/awesomplete.css
        pxa_dealers = EXT:pxa_dealers/Resources/Public/Css/pxa_dealers.css
    }

    includeJSFooterlibs {
        google_map = https://maps.googleapis.com/maps/api/js?key={$plugin.tx_pxadealers.settings.googleJavascriptApiKey}
        google_map.external = 1
        markerclusterer = EXT:pxa_dealers/Resources/Public/JavaScript/markerclusterer.js
        isotope = EXT:pxa_dealers/Resources/Public/JavaScript/isotope.pkgd.min.js
        awesomplete = EXT:pxa_dealers/Resources/Public/JavaScript/awesomplete.min.js

        pxa_dealers_plugin = EXT:pxa_dealers/Resources/Public/JavaScript/pxa_dealers_plugin.js
    }

    includeJSFooter {
        pxa_dealers = EXT:pxa_dealers/Resources/Public/JavaScript/pxa_dealers.js
        pxa_dealers_search = EXT:pxa_dealers/Resources/Public/JavaScript/pxa_dealers_search.js
    }
}

[globalVar = GP:type = 2313089]
    pxaDealersSuggest = PAGE
    pxaDealersSuggest {
        typeNum = 2313089

        config {
            disableAllHeaderCode = 1
            no_cache = 1
            admPanel = 0
        }

        5 = USER_INT
        5 {
            userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
            extensionName = PxaDealers
            pluginName = Pxadealers
            vendorName = Pixelant

            settings =< plugin.tx_pxadealers.settings
            persistence =< plugin.tx_pxadealers.persistence
            view =< plugin.tx_pxadealers.view

            SwitchableControllerActions {
                Dealers {
                    1 = suggest
                }
            }
        }
    }
[end]